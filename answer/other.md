# 其他
###  一致性hash算法 [[code](../algo/consistenthash)]

![add_peer](../img/add_peer.jpg)

- 哈希环 2^32
- 哈希倾斜   ---> 虚拟节点

###   微服务概述
微服务是一种将单个应用以许多微小的服务所组成的服务套件的形式来构建软件的方法，
每个微服务拥有自己的轻量级数据处理模块以及通信机制（通常是HTTP API的形式）。
微服务围绕业务能力和各自独立的自动化部署机制构建而来。
由于微服务需要极少的集中管理，因此各个服务可以使用不同的编程语言以及不同的存储技术。

###  什么是死锁，如何避免
- 死锁情况  
  第一种：同一个goroutine中，使用同一个 channel 读写。 
  第二种：2个 以上的go程中， 使用同一个 channel 通信。 读写channel 先于 go程创建。
  第三种：2个以上的go程中，使用多个 channel 通信。 A go 程 获取channel 1 的同时，尝试使用channel 2， 同一时刻，B go 程 获取channel 2 的同时，尝试使用channel 1
  第四种： 在go语言中， channel 和 读写锁、互斥锁 尽量避免交叉混用。——“隐形死锁”。如果必须使用。推荐借助“条件变量”


- 科夫曼条件如下：
  相互排斥：并发进程在任何时候都拥有资源的独占权。
  等待条件：并发进程必须同时持有资源并等待额外的资源。
  没有抢占：并发进程持有的资源只能由该进程释放，因此它满足了这种情况。
  循环等待：并发进程（P1）等待并发进程（P2），同时P2也在等待P1，因此也符合"循环等待"这    一条件。
###  限流策略
[https://mp.weixin.qq.com/s/x4ob5RTl10eb-RMyivVWhg](https://mp.weixin.qq.com/s/x4ob5RTl10eb-RMyivVWhg)